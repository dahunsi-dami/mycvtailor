{% extends './base.html' %}
{% block title %}Tailor CV{% endblock %}
{% block content %}

<div class="editor-header">
    <h1>Edit Your CV</h1>
    <p>Customize your resume text below to match the job description. Your changes will be saved automatically.</p>
</div>

<div id="editor-container">
    <div id="monaco-editor" style="width:100%;height:600px;"></div>
</div>

<!-- Hidden element to store resume text -->
<div id="resume-text" style="display: none;">{{ resume_text|default:"" }}</div>

<!-- Load Monaco Editor -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.js"></script>
<script>
    require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs' }});
    require(['vs/editor/editor.main'], function() {
        var resumeText = document.getElementById('resume-text').textContent || '';

        // Define editor options with styling
        var editorOptions = {
            value: resumeText,
            language: 'plaintext',
            theme: 'vs-light',
            lineNumbers: "off",
            fontSize: 14,
            fontFamily: "'Roboto', monospace",
            lineHeight: 24,
            minimap: {
                enabled: false
            },
            padding: {
                top: 20,
                bottom: 20
            },
            wordWrap: 'on',
            scrollBeyondLastLine: false,
            automaticLayout: true,
            renderWhitespace: 'none'
        };

        var editor = monaco.editor.create(document.getElementById('monaco-editor'), editorOptions);
    });
</script>
{% endblock %}